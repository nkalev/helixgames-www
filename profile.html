<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>My Profile | Helix Games</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="Your Helix Games profile - view stats, scores, and achievements" />
	
	<!-- CSS -->
	<link href="assets/css/vendor.min.css" rel="stylesheet" />
	<link href="assets/css/app.min.css" rel="stylesheet" />
	<link href="auth/auth-ui.css" rel="stylesheet" />
	<style>
		:root {
			--helix-primary: #3cd2a5;
			--helix-primary-light: #5ddbb5;
			--helix-bg-dark: #0a0e10;
			--helix-bg-card: #1a1f23;
			--helix-text: #ffffff;
			--helix-text-muted: rgba(255, 255, 255, 0.6);
		}
		
		.profile-container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 40px 20px;
		}
		
		.profile-header {
			background: var(--helix-bg-card);
			border-radius: 16px;
			padding: 40px;
			margin-bottom: 30px;
			border: 1px solid rgba(60, 210, 165, 0.2);
			display: flex;
			align-items: center;
			gap: 30px;
		}
		
		.profile-avatar {
			width: 120px;
			height: 120px;
			border-radius: 50%;
			border: 3px solid var(--helix-primary);
			box-shadow: 0 0 20px rgba(60, 210, 165, 0.3);
		}
		
		.profile-info {
			flex: 1;
		}
		
		.profile-name {
			font-size: 2.5rem;
			font-weight: 700;
			color: var(--helix-primary);
			margin-bottom: 10px;
		}
		
		.profile-username {
			font-size: 1.2rem;
			color: var(--helix-text-muted);
			margin-bottom: 15px;
		}
		
		.profile-meta {
			display: flex;
			gap: 30px;
			flex-wrap: wrap;
		}
		
		.profile-meta-item {
			display: flex;
			align-items: center;
			gap: 8px;
			color: var(--helix-text-muted);
		}
		
		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
			gap: 20px;
			margin-bottom: 30px;
		}
		
		.stat-card {
			background: var(--helix-bg-card);
			border-radius: 12px;
			padding: 25px;
			border: 1px solid rgba(60, 210, 165, 0.2);
			text-align: center;
			transition: all 0.3s ease;
		}
		
		.stat-card:hover {
			transform: translateY(-5px);
			border-color: var(--helix-primary);
		}
		
		.stat-icon {
			font-size: 2.5rem;
			margin-bottom: 15px;
		}
		
		.stat-value {
			font-size: 2.5rem;
			font-weight: 800;
			color: var(--helix-primary);
			display: block;
			margin-bottom: 8px;
		}
		
		.stat-label {
			color: var(--helix-text-muted);
			text-transform: uppercase;
			font-size: 0.9rem;
			letter-spacing: 1px;
		}
		
		.section-title {
			font-size: 1.8rem;
			font-weight: 700;
			color: var(--helix-text);
			margin-bottom: 20px;
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.scores-container {
			background: var(--helix-bg-card);
			border-radius: 16px;
			padding: 30px;
			border: 1px solid rgba(60, 210, 165, 0.2);
			margin-bottom: 30px;
		}
		
		.game-scores {
			margin-bottom: 30px;
		}
		
		.game-scores:last-child {
			margin-bottom: 0;
		}
		
		.game-scores-header {
			display: flex;
			align-items: center;
			gap: 15px;
			margin-bottom: 15px;
			padding-bottom: 15px;
			border-bottom: 1px solid rgba(60, 210, 165, 0.1);
		}
		
		.game-icon {
			font-size: 2rem;
		}
		
		.game-title {
			font-size: 1.3rem;
			font-weight: 600;
			color: var(--helix-primary);
		}
		
		.scores-list {
			display: grid;
			gap: 10px;
		}
		
		.score-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 12px 15px;
			background: rgba(60, 210, 165, 0.05);
			border-radius: 8px;
			border: 1px solid rgba(60, 210, 165, 0.1);
		}
		
		.score-value {
			font-size: 1.5rem;
			font-weight: 700;
			color: var(--helix-primary);
		}
		
		.score-meta {
			color: var(--helix-text-muted);
			font-size: 0.9rem;
		}
		
		.no-scores {
			text-align: center;
			padding: 40px;
			color: var(--helix-text-muted);
		}
		
		.achievements-preview {
			background: var(--helix-bg-card);
			border-radius: 16px;
			padding: 30px;
			border: 1px solid rgba(60, 210, 165, 0.2);
		}
		
		.achievements-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
			gap: 15px;
			margin-bottom: 20px;
		}
		
		.achievement-badge {
			background: rgba(60, 210, 165, 0.05);
			border: 1px solid rgba(60, 210, 165, 0.2);
			border-radius: 12px;
			padding: 20px;
			text-align: center;
			transition: all 0.3s ease;
		}
		
		.achievement-badge:hover {
			transform: scale(1.05);
			border-color: var(--helix-primary);
		}
		
		.achievement-icon {
			font-size: 3rem;
			margin-bottom: 10px;
		}
		
		.achievement-title {
			font-size: 0.9rem;
			color: var(--helix-text);
			font-weight: 600;
		}
		
		.view-all-btn {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			padding: 12px 24px;
			background: var(--helix-primary);
			color: #000;
			border-radius: 8px;
			font-weight: 600;
			text-decoration: none;
			transition: all 0.3s ease;
		}
		
		.view-all-btn:hover {
			background: var(--helix-primary-light);
			transform: translateY(-2px);
		}
		
		@media (max-width: 768px) {
			.profile-header {
				flex-direction: column;
				text-align: center;
			}
			
			.profile-name {
				font-size: 2rem;
			}
			
			.stats-grid {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>
<body>
	<div id="app" class="app">
		<!-- Header -->
		<div id="header" class="app-header">
			<div class="mobile-toggler">
				<button type="button" class="menu-toggler" data-toggle-class="app-sidebar-mobile-toggled" data-toggle-target=".app">
					<span class="bar"></span>
					<span class="bar"></span>
					<span class="bar"></span>
				</button>
			</div>
			
			<div class="brand">
				<a href="index.html" class="brand-logo">
					<span class="brand-img">
						<span class="brand-img-text text-theme">H</span>
					</span>
					<span class="brand-text">HELIX GAMES</span>
				</a>
			</div>
		</div>
		
		<!-- Sidebar -->
		<div id="sidebar" class="app-sidebar">
			<div class="app-sidebar-content" data-scrollbar="true" data-height="100%">
				<div class="menu">
					<div class="menu-header">Navigation</div>
					<div class="menu-item">
						<a href="index.html" class="menu-link">
							<span class="menu-icon"><i class="bi bi-house-door"></i></span>
							<span class="menu-text">Home</span>
						</a>
					</div>
					<div class="menu-item active">
						<a href="profile.html" class="menu-link">
							<span class="menu-icon"><i class="bi bi-person"></i></span>
							<span class="menu-text">Profile</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="leaderboards.html" class="menu-link">
							<span class="menu-icon"><i class="bi bi-bar-chart"></i></span>
							<span class="menu-text">Leaderboards</span>
						</a>
					</div>
					<div class="menu-item">
						<a href="achievements.html" class="menu-link">
							<span class="menu-icon"><i class="bi bi-trophy"></i></span>
							<span class="menu-text">Achievements</span>
						</a>
					</div>
				</div>
			</div>
		</div>
		
		<button class="app-sidebar-mobile-backdrop" data-toggle-target=".app" data-toggle-class="app-sidebar-mobile-toggled"></button>
		
		<!-- Content -->
		<div id="content" class="app-content">
			<div class="profile-container">
				<!-- Profile Header -->
				<div class="profile-header" id="profile-header">
					<!-- Populated by JavaScript -->
				</div>
				
				<!-- Stats Grid -->
				<div class="stats-grid" id="stats-grid">
					<!-- Populated by JavaScript -->
				</div>
				
				<!-- Recent Scores -->
				<div class="scores-container">
					<h2 class="section-title">
						<i class="bi bi-star"></i>
						Personal Best Scores
					</h2>
					<div id="scores-list">
						<!-- Populated by JavaScript -->
					</div>
				</div>
				
				<!-- Achievements Preview -->
				<div class="achievements-preview">
					<h2 class="section-title">
						<i class="bi bi-trophy"></i>
						Recent Achievements
					</h2>
					<div id="achievements-preview" class="achievements-grid">
						<!-- Populated by JavaScript -->
					</div>
					<a href="achievements.html" class="view-all-btn">
						<i class="bi bi-arrow-right"></i>
						View All Achievements
					</a>
				</div>
			</div>
		</div>
		
		<a href="#" data-toggle="scroll-to-top" class="btn-scroll-top fade"><i class="fa fa-arrow-up"></i></a>
	</div>
	
	<!-- Scripts -->
	<script src="assets/js/vendor.min.js"></script>
	<script src="assets/js/app.min.js"></script>
	<script src="auth/auth.js"></script>
	<script src="auth/auth-ui.js"></script>
	
	<script>
		// Profile page logic
		document.addEventListener('DOMContentLoaded', () => {
			const user = window.helixAuth.getCurrentUser();
			
			if (!user) {
				window.location.href = 'index.html';
				return;
			}
			
			// Populate profile header
			const profileHeader = document.getElementById('profile-header');
			profileHeader.innerHTML = `
				<img src="${user.avatarUrl}" alt="${user.displayName}" class="profile-avatar">
				<div class="profile-info">
					<h1 class="profile-name">${user.displayName}</h1>
					<div class="profile-username">@${user.username}</div>
					<div class="profile-meta">
						<div class="profile-meta-item">
							<i class="bi bi-envelope"></i>
							${user.email}
						</div>
						<div class="profile-meta-item">
							<i class="bi bi-calendar"></i>
							Joined ${new Date(user.createdAt).toLocaleDateString()}
						</div>
					</div>
				</div>
			`;
			
			// Populate stats
			const allScores = window.helixAuth.getAllScores();
			const achievements = window.helixAuth.getAchievements();
			
			let totalGames = 0;
			let totalScore = 0;
			Object.values(allScores).forEach(gameScores => {
				totalGames += gameScores.length;
				gameScores.forEach(s => totalScore += s.score);
			});
			
			const statsGrid = document.getElementById('stats-grid');
			statsGrid.innerHTML = `
				<div class="stat-card">
					<div class="stat-icon">üéÆ</div>
					<span class="stat-value">${totalGames}</span>
					<span class="stat-label">Games Played</span>
				</div>
				<div class="stat-card">
					<div class="stat-icon">‚≠ê</div>
					<span class="stat-value">${totalScore.toLocaleString()}</span>
					<span class="stat-label">Total Score</span>
				</div>
				<div class="stat-card">
					<div class="stat-icon">üèÜ</div>
					<span class="stat-value">${Object.keys(achievements).length}</span>
					<span class="stat-label">Achievements</span>
				</div>
				<div class="stat-card">
					<div class="stat-icon">üéØ</div>
					<span class="stat-value">${Object.keys(allScores).length}</span>
					<span class="stat-label">Games Mastered</span>
				</div>
			`;
			
			// Populate scores
			const scoresList = document.getElementById('scores-list');
			const gameIcons = {
				'2048': 'üéØ',
				'asteroids': 'üöÄ',
				'help-chopper': 'üöÅ',
				'invasion': 'üëæ',
				'lode-runner': 'üèÉ',
				'pacman': 'üü°',
				'planet-patrol': 'üöó',
				'pongr': 'üèì',
				'space-invaders': 'üõ∏',
				'tetris': 'üß©'
			};
			
			if (Object.keys(allScores).length === 0) {
				scoresList.innerHTML = '<div class="no-scores">No scores yet. Start playing to track your progress!</div>';
			} else {
				let scoresHTML = '';
				Object.keys(allScores).forEach(gameName => {
					const scores = allScores[gameName];
					if (scores.length > 0) {
						const topScore = scores[0];
						scoresHTML += `
							<div class="game-scores">
								<div class="game-scores-header">
									<span class="game-icon">${gameIcons[gameName] || 'üéÆ'}</span>
									<span class="game-title">${gameName.charAt(0).toUpperCase() + gameName.slice(1)}</span>
								</div>
								<div class="scores-list">
									${scores.slice(0, 5).map((score, index) => `
										<div class="score-item">
											<span class="score-meta">#${index + 1}</span>
											<span class="score-value">${score.score.toLocaleString()}</span>
											<span class="score-meta">${score.level ? `Level ${score.level}` : ''} ‚Ä¢ ${new Date(score.achievedAt).toLocaleDateString()}</span>
										</div>
									`).join('')}
								</div>
							</div>
						`;
					}
				});
				scoresList.innerHTML = scoresHTML;
			}
			
			// Populate achievements preview
			const achievementsPreview = document.getElementById('achievements-preview');
			const achievementsList = Object.entries(achievements).slice(0, 6);
			
			if (achievementsList.length === 0) {
				achievementsPreview.innerHTML = '<div class="no-scores">No achievements unlocked yet. Keep playing!</div>';
			} else {
				achievementsPreview.innerHTML = achievementsList.map(([key, ach]) => `
					<div class="achievement-badge">
						<div class="achievement-icon">${ach.icon || 'üèÜ'}</div>
						<div class="achievement-title">${ach.title}</div>
					</div>
				`).join('');
			}
		});
	</script>
</body>
</html>
